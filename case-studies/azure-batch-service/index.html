<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://microsoft.github.io/coyote/case-studies/azure-batch-service/">
    <link rel="shortcut icon" href="/coyote/img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Azure Batch Service - Coyote</title>
    <link href="/coyote/css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="/coyote/css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="/coyote/css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="/coyote/css/highlight.css">
    <link href="../../css/main.css" rel="stylesheet">
    <link href="../../css/player-controls.css" rel="stylesheet">
    <link href="../../css/syntax.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="/coyote/js/jquery-3.2.1.min.js"></script>
    <script src="/coyote/js/bootstrap-3.3.7.min.js"></script>
    <script src="/coyote/js/highlight.pack.js"></script>
    <script src="https://consentdeliveryfd.azurefd.net/mscc/lib/v2/wcp-consent.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '/coyote/';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Azure Batch Service", url: "#_top", children: [
              {title: "Background", url: "#background" },
              {title: "Challenge", url: "#challenge" },
              {title: "Solution", url: "#solution" },
              {title: "Coyote's key advantages", url: "#coyotes-key-advantages" },
          ]},
        ];

    </script>
    <script src="/coyote/js/base.js"></script>
      <script src="../../assets/js/analytics.js"></script>
      <script src="../../assets/js/plugins.js"></script>
      <script src="../../assets/js/animate_trace.js"></script>
      <script src="../../assets/js/animation.js"></script>
      <script src="../../assets/js/progress_bar.js"></script>
      <script src="../../assets/js/trace_model.js"></script>
      <script src="../../assets/js/main.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>

<div id="cookie-banner"></div>


<div class="wrapper wm-page-content">
  <div class="container-fluid">
    <a name="_top"></a>
      

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../azure-blockchain-service/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../azure-blockchain-service/" class="btn btn-xs btn-link">
        Azure Blockchain Service
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../samples/actors/failover-robot-navigator/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../samples/actors/failover-robot-navigator/" class="btn btn-xs btn-link">
        Robot navigator failover
      </a>
    </div>
    
  </div>

      

      <h1 id="azure-batch-service">Azure Batch Service</h1>
<h2 id="background">Background</h2>
<p><a href="https://azure.microsoft.com/en-us/services/batch/">Azure Batch Service</a> is a cloud-scale
job-scheduling service. Users can submit a parallel job consisting of multiple tasks with a given set
of dependencies and Azure Batch Service will execute them on Azure, in dependency order, exploiting as much
parallelism as possible between independent tasks. Batch is a popular service, managing over hundreds
of thousands of VMs on Azure.</p>
<p>Integrating scheduling with virtual machine (VM) management, Azure Batch Service supports
auto-scaling the number of VMs created, spinning up or down according to the needs of the job.
This differs from many other schedulers&mdash;like Yarn or Mesos, for example&mdash;that must be installed
on a pre-created set of VMs.</p>
<h2 id="challenge">Challenge</h2>
<p>The Batch team wanted to invest in a new microservices-based architecture that would reliably
scale to meet the demands of the service. The complex responsive design demanded that each
microservice be able to:</p>
<ul>
<li>Process requests asynchronously as they arrived.</li>
<li>Support cancellation of an in-flight request, enabling quick turnaround for auto-scaling.</li>
<li>Be resilient to failures of VMs hosting the service.</li>
</ul>
<h2 id="solution">Solution</h2>
<p>Coding three of their core microservices with Coyote, the team used Coyote&rsquo;s state machines
programming model for fully asynchronous, non-blocking computation. The team also wrote
detailed functional specifications&mdash;as well as models of external services&mdash;to allow for
exhaustive testing of concurrent behaviors and failures. These services totalled to more than
100,000 lines of code.</p>
<h2 id="coyotes-key-advantages">Coyote&rsquo;s key advantages</h2>
<p>The Batch team reported several key advantages of developing and testing their code using Coyote.</p>
<ul>
<li>Faster development time: adding a new feature for supporting low-priority VMs to the Coyote code took
just one developer month. The same feature took six developer months in the legacy code. Coyote
design and testing added agility and allowed progress at a much faster pace.</li>
<li>Coyote removed reliance on overly complex, and often inadequate, unit tests for each small
component. The Batch team reported that Coyote&rsquo;s test coverage for end-to-end scenarios was <em>unheard
of</em> previously.</li>
<li>Features were developed in a test environment to first pass the Coyote tester. When dropped in
production, they simply worked from the start.</li>
<li>Coyote gave developers a significant confidence boost by providing full failover and concurrency testing at each check-in, right on their desktops as the code was written.</li>
</ul>
<p>Read more about it in this <a href="https://arxiv.org/abs/2002.04903">arXiv technical paper</a>. (Note that the paper still refers to P#, the name of the previous incarnation of Coyote.)</p>

    <br>
      

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../azure-blockchain-service/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../azure-blockchain-service/" class="btn btn-xs btn-link">
        Azure Blockchain Service
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../samples/actors/failover-robot-navigator/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../samples/actors/failover-robot-navigator/" class="btn btn-xs btn-link">
        Robot navigator failover
      </a>
    </div>
    
  </div>

      <br>
  </div>
</div>

<footer class="wm-page-content">
  

<section class="footer-join pt-40 pb-80">
  <div class="container-fluid">
    <div class="row text-center">
      <div class="col-sm-8 col-sm-offset-2">
      </div>
    </div>
    <div class="row">
   </div>
  </div>
</section>
<section class="footer-dark pt-60">
  <div class="container-fluid">
    <div class="row">
      <div class="hidden-xs col-sm-5 col-lg-6">
        <a href="" title="homepage" class="logo-footer">
          <img src="/coyote/assets/images/icon.png" alt="Coyote">
        </a>
      </div>

      <div class="col-sm-2 col-xs-4 footer-dark-col">
        <nav>
          <h4>Coyote</h4>
          <ul class="list-unstyled">
            <li><a href="/coyote/">Home</a></li>
            <li><a href="/coyote/get-started/install/">Install</a></li>
          </ul>
        </nav>
      </div>

      <div class="col-sm-2 col-xs-4 footer-dark-col">
        <nav>
          <h4>Resources</h4>
          <ul class="list-unstyled">
            <li><a href="/coyote/tutorials/first-concurrency-unit-test/">Getting started</a></li>
            <li><a href="/coyote/tutorials/overview/">Tutorials</a></li>
            <li><a href="/coyote/ref/Microsoft.Coyote">API documentation</a></li>
          </ul>
        </nav>
      </div>

      <div class="col-sm-2 col-xs-4 footer-dark-col">
        <nav>
          <h4>Community</h4>
          <ul class="list-unstyled">
            <li><a href="https://github.com/microsoft/coyote/"><i class="fa fa-github"></i>
GitHub</a></li>
            <li><a href="https://twitter.com/coyote_dev" target="_blank"><i class="fa fa-twitter"></i> Twitter</a></li>
            <li><a href="https://gitter.im/microsoft/coyote" target="_blank">Gitter</a></li>
          </ul>
        </nav>
      </div>
    </div>

    <div class="row footnote pt-50 pb-20">
      <div class="col-sm-12">
        <hr>
      </div>
      <div class="col-sm-6">
        <ul class="list-unstyled list-inline footnote-copy">
          <li><a href="https://privacy.microsoft.com/en-us/privacystatement/" target="_blank">Privacy</a></li>
          <li><a href="https://www.microsoft.com/en-us/legal/intellectualproperty/copyright/default.aspx" target="_blank">Terms of Use</a></li>
          <li><a href="https://github.com/microsoft/coyote/blob/main/LICENSE" target="_blank">License</a></li>
          <li><a href="javascript:manageCookies()">Cookies</a></li>
        </ul>
      </div>
      <div class="col-sm-6 text-right footnote-copy">
        <ul class="list-unstyled list-inline">
          <li><span id="copyright"></span></li>
          <li><a href="https://www.microsoft.com/" target="_blank"><img class="img-responsive" src="/coyote/assets/images/microsoft-logo.svg?v=3" alt="Microsoft">&nbsp;</a></li>
        </ul>
      </div>
    </div>
  </div>
</section>
</footer>


<script type="text/javascript">
    $(document).ready(function () {
      $('table').each(function () {
        $(this).addClass("table");
        $(this).addClass("table-bordered");
        $(this).addClass("table-striped");
        $(this).addClass("table-condensed");
      });

    });
</script>

</body>
</html>